document.addEventListener("DOMContentLoaded",function(e){var o=document.querySelector(".map-feedback-button"),t=document.querySelector(".modal-feedback"),a=t.querySelector(".cross"),s=t.querySelector("[name=login]"),r=t.querySelector("[name=email]"),l=document.querySelector(".modal-overlay"),c=!0,n="";try{n=localStorage.getItem("login")}catch(e){c=!1}o.addEventListener("click",function(e){e.preventDefault(),t.classList.add("feedback-show"),l.classList.add("modal-overlay-open")}),a.addEventListener("click",function(e){e.preventDefault(),t.classList.remove("feedback-show"),t.classList.remove("modal-error"),l.classList.remove("modal-overlay-open"),n?(s.value=n,password.focus()):s.focus(),s.focus()}),t.addEventListener("submit",function(e){s.value&&r.value?c&&localStorage.setItem("login",s.value):(e.preventDefault(),t.classList.remove("modal-error"),t.offsetWidth=t.offsetWidth,t.classList.add("modal-error"),console.log("Нужно ввести логин и пароль"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),t.classList.contains("feedback-show")&&(t.classList.remove("feedback-show"),t.classList.remove("modal-error")))})});